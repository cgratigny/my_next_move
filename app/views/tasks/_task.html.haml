%turbo-frame{:id => "#{dom_id task}"}
  %div{:id => "#{dom_id task}"}
    = check_box_tag(dom_id(task))
    %span.font-semibold
      = link_to [task.taskable, task], data: { turbo_frame: :_top } do
        = task.name
    %span{ class: task.state.tailwind_class}
      = task.state.text

    = link_to [:edit, task.taskable, task] do
      = heroicon "cog-6-tooth", size: 16, class: "pb-0.5 inline"
    
    = render Common::Element::DestroyLinkComponent.new(model: @task)

    %br
    .text-xs.ml-6
      = link_to [task.taskable], data: { turbo_frame: :_top } do
        = task.taskable
      = " | "
      %span{ class: task.past_due? ? "text-red-600" : task.due_today? ? "font-semibold dark:text-yellow-200 text-yellow-600" : "" }
        Due #{task.due_date.to_fs}

    - if action_name == "show" && controller_name == "tasks"
      - if task.body.present?
        .p-6.m-2.bg-white.border.border-gray-200.rounded-lg.shadow.dark:bg-gray-800.dark:border-gray-700.mb-4.text-xs
          = task.body.to_s
    